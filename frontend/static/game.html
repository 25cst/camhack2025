<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title></title>
        <link href="css/style.css" rel="stylesheet">
    </head>
    <body style="width: 50%; margin: auto">
        <img src="/api/graph" alt="" id="graph" style="width: 100%; margin: auto; display: block">
        <br>
        <button id="guess">make guess</button>
        <ol id="list">
        </ol>
    </body>
    <script>
        const url = new URL(window.location.href); // Get the current URL
const params = new URLSearchParams(url.search);

// Get a specific parameter
const code = params.get('code'); 

        document.getElementById("graph").src = `/api/graph?code=${code}`
        let round = 1
        let guesses = []
        document.getElementById("guess").onclick = async () => {
            guess = prompt("Make a guess")
            guesses.push(guess)

            let hints = await fetch(`/api/guess?guess=${guess}&code=${code}&round=${round}${guesses.map(s => `&guesses=${s}`).join("")}`)
            hints = await hints.json()
            if(hints.type === "error") {
                alert("Not in word list")
                return
            }

            if(hints.words.length === 0) {
                alert("you got it!")
                return
            }

            document.getElementById("graph").src = `/api/graph?code=${code}${guesses.map(s => `&guesses=${s}`).join("")}`
// 
            document.getElementById("list").innerHTML += `<li>Guess ${round++}: ${guess}<br>hints: ${hints.words.map(([word, score]) => word).join(", ")}</li>`
        }

    </script>
</html>
